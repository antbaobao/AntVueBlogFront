webpackJsonp([8],{"6Rjw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("exGp"),s=a.n(r),o=a("viA7"),c=a("FRZr"),u=a("6dj7"),l={data:function(){return{getArticlesByCategoryLoading:!1,articles:[],noData:!1,count:0,pageLimit:10,pageSize:1}},components:{Timeline:u.Timeline,TimelineItem:u.TimelineItem,TimelineTitle:u.TimelineTitle,Spin:c.a},beforeRouteUpdate:function(e,t,a){var i=e.query.pageSize?e.query.pageSize:1;this.getArticlesByCategory(e.params.id,i,this.pageLimit),a()},mounted:function(){var e=this.$route.query.pageSize?this.$route.query.pageSize:1;this.getArticlesByCategory(this.$route.params.id,e,this.pageLimit)},methods:{formatYearAndDate:function(e){var t,a,i,n,r=function(e){return e<10?"0"+e:e};return t=new Date(1e3*parseInt(e)),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),a+"-"+r(i)+"-"+r(n)},getArticlesByCategory:function(e,t,a){var i=this;return s()(n.a.mark(function r(){var s;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.getArticlesByCategoryLoading=!0,n.prev=1,n.next=4,Object(o.e)(e,t,a);case 4:s=n.sent,i.getArticlesByCategoryLoading=!1,s.data.code?i.$message.error("获取列表失败"):(i.articles=s.data.data.article,i.noData=!(i.articles.length>0),i.count=s.data.data.count,i.pageSize=s.data.data.pageSize,i.pageLimit=s.data.data.pageLimit),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),i.getArticlesByCategoryLoading=!1,i.$message.error("出错了");case 14:case"end":return n.stop()}},r,i,[[1,9]])}))()},handleCurrentChange:function(e){this.$router.push({path:"/categories/"+this.$route.params.id,query:{pageSize:e}})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[e.getArticlesByCategoryLoading?a("Spin"):a("div",{staticClass:"category-item-list-container"},[e.noData?a("div",{staticClass:"no-data"},[e._v("\n      暂无数据\n    ")]):a("timeline",{attrs:{"timeline-theme":"rgba(0,0,0,0.3)"}},[a("timeline-title",{staticClass:"key",attrs:{"font-color":"#555"}},[e._v(e._s(e.$route.query.name)+" 分类")]),e._v(" "),e._l(e.articles,function(t,i){return a("timeline-item",{key:i},[a("a",{staticClass:"timeline-item-container",on:{click:function(a){e.$router.push({name:"Detail",params:{id:t._id}})}}},[a("span",{staticClass:"date"},[e._v(e._s(e.formatYearAndDate(Number(t.publishAt)/1e3)))]),e._v(" "),a("span",{staticClass:"title"},[e._v(e._s(t.title))])])])})],2),e._v(" "),e.count>e.pageLimit?a("el-pagination",{attrs:{"current-page":e.pageSize,"page-size":e.pageLimit,layout:"total, prev, pager, next",total:e.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageSize=t}}}):e._e()],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,g,!1,function(e){a("Wyhs")},"data-v-4b21c516",null);t.default=p.exports},Wyhs:function(e,t){}});
//# sourceMappingURL=8.5fe011b9dcffe7b4682f.js.map